# AstrBot 德州扑克插件

完整的德州扑克群内多人对战插件，支持AstrBot所有平台适配器，特别优化支持aiocqhttp。

## ✨ 功能特点

- 🃏 **完整德州扑克规则**：Pre-flop、Flop、Turn、River、Showdown完整流程
- 🎨 **精美图形渲染**：高质量扑克牌图形，支持手牌和公共牌渲染
- 👥 **多人实时对战**：2-9人群内对战，其他人可旁观
- 📊 **数据持久化**：完整的玩家统计、游戏历史记录
- ⏰ **超时机制**：自动弃牌，保证游戏流畅进行
- 🏆 **排行榜系统**：群内玩家盈利排行

## 🎮 游戏命令

### 游戏管理
- `/德州创建 [小盲注] [大盲注]` - 创建新游戏
- `/德州加入` - 加入游戏
- `/德州开始` - 开始游戏（需2-9人）
- `/德州状态` - 查看当前游戏状态

### 游戏操作
- `/跟注` - 跟注当前下注额
- `/加注 [金额]` - 加注指定金额
- `/弃牌` - 弃牌退出当前手牌
- `/让牌` - 让牌（check）
- `/全下` - 全下所有筹码

### 查询功能
- `/德州排行` - 查看群内排行榜
- `/德州帮助` - 显示帮助信息

## 🎯 游戏规则

1. **游戏阶段**：
   - Pre-flop：每人2张手牌，下盲注
   - Flop：发3张公共牌，第一轮下注
   - Turn：发第4张公共牌，第二轮下注  
   - River：发第5张公共牌，第三轮下注
   - Showdown：摊牌比较牌型

2. **下注规则**：
   - 支持跟注、加注、弃牌、让牌、全下
   - 最小加注为大盲注金额
   - 支持边池机制（多人all-in）

3. **牌型排序**（从大到小）：
   - 皇家同花顺 > 同花顺 > 四条 > 葫芦 > 同花 > 顺子 > 三条 > 两对 > 一对 > 高牌

## ⚙️ 配置选项

在AstrBot管理面板中可配置：

- **default_chips**: 玩家初始筹码（默认1000）
- **small_blind**: 默认小盲注（默认10）
- **big_blind**: 默认大盲注（默认20）  
- **action_timeout**: 行动超时时间（默认30秒）
- **min_players**: 最少玩家数（默认2人）
- **max_players**: 最多玩家数（默认9人）

## 📋 安装说明

1. 确保AstrBot版本支持插件系统
2. 将插件文件夹复制到 `data/plugins/` 目录
3. 在AstrBot管理面板中启用插件
4. 建议在`assets/fonts/`目录下放置arial.ttf字体文件以获得更好的渲染效果

## 🔧 技术实现

- **架构设计**：参考papertrading插件的模块化架构
- **数据存储**：JSON文件存储，支持游戏状态持久化
- **图形渲染**：基于PIL的高质量扑克牌渲染
- **并发处理**：异步超时检查，支持多群同时游戏
- **平台兼容**：完全兼容AstrBot的消息组件系统

## 📝 使用示例

```
# 创建游戏
/德州创建 20 40

# 其他玩家加入
/德州加入

# 开始游戏（需至少2人）
/德州开始

# 游戏中操作
/跟注
/加注 100
/弃牌
```

## 🤝 贡献

欢迎提交Issue和Pull Request！

## 📄 许可证

MIT License